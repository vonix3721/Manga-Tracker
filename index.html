<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anime & Manga Tracker</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        .tracker-toggle {
            display: flex;
            margin-bottom: 20px;
        }
        .tracker-toggle button {
            flex: 1;
            padding: 10px;
            font-size: 18px;
            background-color: #f0f0f0;
            border: none;
            cursor: pointer;
        }
        .tracker-toggle button.active {
            background-color: #4CAF50;
            color: white;
        }
        .tracker-section {
            display: none;
        }
        .tracker-section.active {
            display: block;
        }
        .input-section {
            background-color: #f5f5f5;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .input-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        input, select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            margin-right: 10px;
        }
        button:hover {
            background-color: #45a049;
        }
        button.delete {
            background-color: #f44336;
        }
        button.delete:hover {
            background-color: #d32f2f;
        }
        button.edit {
            background-color: #ff9800;
        }
        button.edit:hover {
            background-color: #e68a00;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        a {
            color: #0066cc;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
        .action-buttons {
            display: flex;
            gap: 5px;
        }
    </style>
</head>
<body>
    <h1>Anime & Manga Tracker</h1>
    
    <div class="tracker-toggle">
        <button id="anime-toggle" class="active">Anime Tracker</button>
        <button id="manga-toggle">Manga Tracker</button>
    </div>
    
    <!-- Anime Tracker Section -->
    <div id="anime-section" class="tracker-section active">
        <div class="input-section">
            <div class="input-group">
                <label for="anime-name">Anime Name:</label>
                <input type="text" id="anime-name" placeholder="Enter anime name">
            </div>
            <div class="input-group">
                <label for="anime-episode">Latest Episode Watched:</label>
                <input type="text" id="anime-episode" placeholder="Enter latest episode">
            </div>
            <div class="input-group">
                <label for="anime-link">Watch URL:</label>
                <input type="text" id="anime-link" placeholder="Enter website URL">
            </div>
            <div class="input-group">
                <label for="anime-date">Last Watched Date:</label>
                <input type="date" id="anime-date">
            </div>
            <button id="add-anime">Add Anime</button>
        </div>
        
        <table id="anime-table">
            <thead>
                <tr>
                    <th>Anime Name</th>
                    <th>Latest Episode</th>
                    <th>Last Watched</th>
                    <th>Watch Link</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
    
    <!-- Manga Tracker Section -->
    <div id="manga-section" class="tracker-section">
        <div class="input-section">
            <div class="input-group">
                <label for="manga-name">Manga Name:</label>
                <input type="text" id="manga-name" placeholder="Enter manga name">
            </div>
            <div class="input-group">
                <label for="manga-chapter">Latest Chapter Read:</label>
                <input type="text" id="manga-chapter" placeholder="Enter latest chapter">
            </div>
            <div class="input-group">
                <label for="manga-link">Read URL:</label>
                <input type="text" id="manga-link" placeholder="Enter website URL">
            </div>
            <div class="input-group">
                <label for="manga-date">Last Read Date:</label>
                <input type="date" id="manga-date">
            </div>
            <button id="add-manga">Add Manga</button>
        </div>
        
        <table id="manga-table">
            <thead>
                <tr>
                    <th>Manga Name</th>
                    <th>Latest Chapter</th>
                    <th>Last Read</th>
                    <th>Read Link</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-firestore-compat.js"></script>

    <script>
         // Your Firebase Config (Replace with yours!)
        const firebaseConfig = {
  apiKey: "AIzaSyASgTfGURfgqM89i8iGheLRYqrU382zATI",
  authDomain: "tracker-53e77.firebaseapp.com",
  projectId: "tracker-53e77",
  storageBucket: "tracker-53e77.firebasestorage.app",
  messagingSenderId: "407251220998",
  appId: "1:407251220998:web:506a2eac92b85e82222187",
  measurementId: "G-S8Q6WX8CFR"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // Track editing state
        let currentEditingId = null;
        let currentCollection = null;

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            // Set today's date
            document.getElementById('anime-date').valueAsDate = new Date();
            document.getElementById('manga-date').valueAsDate = new Date();
            
            // Setup toggle buttons
            document.getElementById('anime-toggle').addEventListener('click', () => toggleTracker('anime'));
            document.getElementById('manga-toggle').addEventListener('click', () => toggleTracker('manga'));
            
            // Setup add buttons
            document.getElementById('add-anime').addEventListener('click', () => addItem('anime'));
            document.getElementById('add-manga').addEventListener('click', () => addItem('manga'));
            
            // Load initial data
            loadData('anime');
            loadData('manga');
        });

        // Toggle between anime/manga sections
        function toggleTracker(type) {
            document.getElementById('anime-toggle').classList.remove('active');
            document.getElementById('manga-toggle').classList.remove('active');
            document.getElementById('anime-section').classList.remove('active');
            document.getElementById('manga-section').classList.remove('active');
            
            document.getElementById(`${type}-toggle`).classList.add('active');
            document.getElementById(`${type}-section`).classList.add('active');
        }

        // Add or update item
        async function addItem(type) {
            const name = document.getElementById(`${type}-name`).value;
            const progress = document.getElementById(`${type}-${type === 'anime' ? 'episode' : 'chapter'}`).value;
            let link = document.getElementById(`${type}-link`).value;
            const date = document.getElementById(`${type}-date`).value;

            if (!name || !progress || !link || !date) {
                alert("Please fill all fields!");
                return;
            }

            if (!link.startsWith('http://') && !link.startsWith('https://')) {
                link = 'http://' + link;
            }

            const itemData = {
                name,
                progress,
                link,
                date,
                type
            };

            if (currentEditingId && currentCollection === type) {
                // Update existing item
                await db.collection(type).doc(currentEditingId).update(itemData);
                resetForm(type);
            } else {
                // Add new item
                await db.collection(type).add(itemData);
            }

            loadData(type);
            clearInputs(type);
        }

        // Load data from Firestore
        async function loadData(type) {
            const tableBody = document.querySelector(`#${type}-table tbody`);
            tableBody.innerHTML = '';

            const snapshot = await db.collection(type).get();
            snapshot.forEach(doc => {
                const item = doc.data();
                const row = tableBody.insertRow();
                row.innerHTML = `
                    <td>${item.name}</td>
                    <td>${item.progress}</td>
                    <td>${formatDate(item.date)}</td>
                    <td><a href="${item.link}" target="_blank">${type === 'anime' ? 'Watch' : 'Read'} Here</a></td>
                    <td class="action-buttons">
                        <button class="edit" onclick="editItem('${type}', '${doc.id}')">Edit</button>
                        <button class="delete" onclick="deleteItem('${type}', '${doc.id}')">Delete</button>
                    </td>
                `;
            });
        }

        // Edit item
        async function editItem(type, id) {
            const doc = await db.collection(type).doc(id).get();
            const item = doc.data();

            document.getElementById(`${type}-name`).value = item.name;
            document.getElementById(`${type}-${type === 'anime' ? 'episode' : 'chapter'}`).value = item.progress;
            document.getElementById(`${type}-link`).value = item.link;
            document.getElementById(`${type}-date`).value = item.date;

            currentEditingId = id;
            currentCollection = type;
            document.getElementById(`add-${type}`).textContent = 'Update ' + type.charAt(0).toUpperCase() + type.slice(1);
            
            // Switch to the correct tab
            toggleTracker(type);
        }

        // Delete item
        async function deleteItem(type, id) {
            if (confirm(`Delete this ${type}?`)) {
                await db.collection(type).doc(id).delete();
                loadData(type);
            }
        }

        // Format date
        function formatDate(dateString) {
            const options = { year: 'numeric', month: 'short', day: 'numeric' };
            return new Date(dateString).toLocaleDateString(undefined, options);
        }

        // Clear input fields
        function clearInputs(type) {
            document.getElementById(`${type}-name`).value = '';
            document.getElementById(`${type}-${type === 'anime' ? 'episode' : 'chapter'}`).value = '';
            document.getElementById(`${type}-link`).value = '';
            document.getElementById(`${type}-date`).valueAsDate = new Date();
        }

        // Reset form after update
        function resetForm(type) {
            currentEditingId = null;
            currentCollection = null;
            document.getElementById(`add-${type}`).textContent = 'Add ' + type.charAt(0).toUpperCase() + type.slice(1);
        }
    </script>
</body>
</html>
